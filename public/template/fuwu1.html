<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="keywords" content="到位，到家，上门服务，家政服务，上门维修，上门按摩，搬家，北京家政服务，上海家政服务">
	<meta name="description" content="到位是中国领先的O2O上门服务平台，汇聚上万种高品质到家服务。家政服务，上门按摩，上门维修，搬家，一站直约，安心到家。现已覆盖北京，上海，深圳，广州，杭州等70多个城市。">
	<title>到位APP - 高品质上门服务直约平台，家政服务，上门按摩，上门维修，搬家，安心到家！</title>
	<link rel="shortcut icon" type="text/css" href="http://www.daoway.cn/pcimages/favicon.png">
	<link rel="shortcut icon" type="text/css" href="../img/favicon.png">
	<link rel="stylesheet" href="../css/bootstrap.min.css">
	<link rel="stylesheet" href="css/fuwu.css">
</head>
<body>
<!--加载头部-->
  <div class="headerWrap"></div>
	<div class="h2">
		<div class="h2left">所有分类
      <i class="bright">></i>
      <i class="cnav">家庭保洁</i>
      <i class="bright">&gt;</i>
    </div>
	</div>
	<div class="navcenter">
		<div class="list1">
			<span class="first">分类</span>
      <div id="#list">
        <span id="all" class="clickAble red">全部</span>
        <span id="小时工" class="clickAble">小时工</span>
        <span id="开荒保洁" class="clickAble">开荒保洁</span>
        <span id="擦玻璃" class="clickAble">擦玻璃</span>
        <span id="深度保洁" class="clickAble" >深度保洁</span>
        <span id="家居养护" class="clickAble">家居养护</span>
        <span id="杀虫除螨" class="clickAble">杀虫除螨</span>
      </div>
    </div>
	</div>
	<!-- /*服务中心*/ -->
	<div class="service-center">
		<div class="centerleft">
			<h3>
        <span class="order">
          <i id="recommend" class="activity">推荐排序</i>
          <i id="sale">销量高
          	<img src="../img/fuwu_down2.jpg">
          </i>
          <i id="comment">好评多
          	<img src="../img/fuwu_down2.jpg">
          </i>
          <i id="aheadhours">上门快
           	<img src="../img/fuwu_down2.jpg">
          </i>
          <i id="price">价格低
          	<img src="../img/fuwu_down2.jpg">
          </i>
        </span>
        
        <span class="spnright">
        	<i id="page" class="cout">1</i>/<i id="pages">449</i>
        	<i class="pageup greycolor">上一页</i>
        	<i class="pagedown ">下一页</i>
        </span>
      </h3>

      <div class="boxtab xianshi" id='showServe'>
        <!--<div class="ctop">-->
          <!--<img class="pic" src="../img/service2.jpg">-->
          <!--<span class="spm spm2">-->
            <!--<i>鞋类13元任洗</i>-->
            <!--<i>本商品可清洗：普通旅游鞋、帆布鞋、布鞋、光面皮鞋（磨砂翻毛鞋..</i>-->
            <!--<i><b >13<em>元/双</em></b><b><em>15元</em></b></i>-->
            <!--<i class="navtxt">-->
            	<!--<b><img src="../img/home1.png">优洗汇</b><b>已售<em data-num="320">320</em></b><b>好评<em data-rate="100">100%</em></b>-->
            <!--</i>-->
          <!--</span>-->
          <!--<span class="spf quickly">-->
            <!--<i>最快上门</i>-->
            <!--<i data-time="2">2小时</i>-->
          <!--</span>-->
        <!--</div>-->
        <!--<div class="ctop">-->
          <!--<img class="pic" src="../img/service1.jpg">-->
          <!--<span class="spm spm2">-->
            <!--<i>招牌Massage</i>-->
            <!--<i style="color: #929292">时长：90分钟服务姿势：卧姿适用介绍:适用于工作繁忙...</i>-->
            <!--<i>-->
              <!--<b style="margin-left: 0" data-price="135">135<em>元/次</em></b><b class="oldpic" style="display: inline-block"><em>168元</em>-->
              <!--</b>-->
            <!--</i>-->
            <!--<i class="navtxt">-->
              <!--<b><img src="../img/home1.png" width="18" height="17">宜生到家</b><b>已售<em data-num="2538">2538</em></b><b>好评<em data-rate="98">98%</em></b>-->
            <!--</i>-->
          <!--</span>-->
          <!--<span class="spf quickly">-->
            <!--<i>最快上门</i>-->
            <!--<i data-time="1">1小时</i>-->
          <!--</span>-->
        <!--</div>-->
      </div>
			
			<!-- 分页 这里显示分页 -->
      <div class="getMore" id="pageNum">
        <div class="ui-page" id="ui-page">
        </div>
        <a class="pageup prev" >&lt;上一页</a>
        <div id="showPage">
					<a class="num">1</a>
					<a class="num ">2</a>
					<a class="num ">3</a>
					<a class="num ">4</a>
					<a class="num ">5</a>
					<a class="num ">6</a>
					<a class="num ">7</a>
					<a class="num ">8</a>
					<a class="num ">9</a>
          <!-- ... -->
        </div>
        <a class="pagedown ">下一页&gt;</a>
      </div>

      <div id="hiddenresult" style="display:none;">
      <!-- 列表元素 -->
      </div>
		</div>
		<!-- 右侧 -->
		<div class="centerright">
			<div class="rightct">
        <h3>服务商</h3>

        <div id="1" class="support">
          <img  src="../img/service1.jpg">
          <p id="name">宜生到家</p>
          <p class="pline"><em>已成功接单<b>13004</b></em><em>好评<b>98%</b></em></p>
        </div>
        
        <div id="2" class="support">
          <img src="../img/service3.jpg">
          <p id="serveName">云家政</p>
          <p class="pline">
	          <em>已成功接单<b>29019</b></em>
	          <em class="good">好评<b>86%</b></em>
          </p>
        </div>

      </div>
		</div>
	</div>
  <!--加载尾部-->
  <div class="footerWrap"></div>
  <script src="../js/jquery-1.12.0.min.js"></script>
<!--artTemplate-->
  <script src="../js/template-web.js"></script>
  <!--分页-->
  <script src="../js/jquery.pagination.js"></script>
  <script>
    $(function() {
      //   加载头、尾部
      $(".footerWrap").load("footer.html")
      $(".headerWrap").load("header.html")

      //  分类 点击事件的委托  除去第一个分类的span标签
      $('.list1').on('click', 'span:not(:eq(0))', function () {
        // $(this).siblings('span').removeClass('red')
        // $(this).addClass('red')
        $(this).toggleClass('red').siblings().removeClass('red')

      })

      //点击排序  事件委托
      $('.order i').click(function () {
        // $(this).siblings('i').removeClass('activity')
        // $(this).addClass('activity')
        // 链式调用的样式添加
        $(this).toggleClass('activity').siblings().removeClass('activity');

        // 获取数据数组
        // let arr = []
        // arr.push($('#Searchresult .ctop').data('price'))
        //  console.log(arr)
        // //根据价格（price）排序  
        // if($(this).attr('id') === 'price'){
        //   function sortprice(a,b){  
        //     // let priceA = a.data('price')
        //     // let priceB = b.data('price')
        //     return a-b
        //   }  
        //   arr.sort(sortprice)
        //   console.log(arr)
        // }

      })

      //利用jquery中的get方法获取json数据  
      // $.get("exp.json","",function(data){
      //     var newdata=data.result
      //     //根据价格（price）排序
      //     function sortprice(a,b){
      //        return a.price-b.price
      //     }
      //     //利用js中的sort方法
      //     newdata.sort(sortprice);
      //     //打印排序后的数据到控制台
      //     console.log(newdata);
      // })

//      正则截取 ---地址栏查询字符串
      function getUrlParam(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.search.substr(1).match(reg); //匹配目标参数
        if (r != null) return unescape(r[2]);
        return null; //返回参数值
      }
      //接收URL中的参数serviceId
      var serviceId = getUrlParam('serviceId');

//      发送ajax请求
//      $.get('/daowei', function (data) {
//        $.each(data.service, function (i, val) {
//          //console.log(val.serviceId == detailId.slice(0,1))
//          if (val.serviceId == serviceId) {
//            var html = template('listServe', val);
//            $('#showServe').append(html);
//          }
//        })
//      })
    })

//    ajax分页
    //分页查询开始
    $(document).ready(function() {
      getDataList(rows, null);
    });

    var rows = 5;
    var page = 1;
    var initFlag = true;

    function getDataList(currPage, jg) {
//     result 布尔值  data json数据对象 total服务器规定的总页数
      $.get('/page',{rows : rows,page : currPage + 1},function(response){
        if (response.result) {
          if (response.data != null && response.data != ""&& response.total != undefined && response.total > 0) {
            if (initFlag) {
              $("#pageNum").pagination(
                response.total,
                {
                  items_per_page : rows,
                  num_edge_entries : 1,
                  num_display_entries : 8,
                  callback : getDataList//回调函数
                });
              initFlag = false;
            }
            $("#showServe").html("");
            loadDataList(response.data);
          } else {
            //暂无数据
          }
        }else {
          //暂无数据
        }
      })
    }
//    创建页面
    function getUrlParam(name) {
      var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
      var r = window.location.search.substr(1).match(reg); //匹配目标参数
      if (r != null) return unescape(r[2]);
      return null; //返回参数值
    }
    //接收URL中的参数serviceId
//    var serviceId = getUrlParam('serviceId');

    function loadDataList(listdata){
      //接收URL中的参数serviceId
      var serviceId = getUrlParam('serviceId');
      /*$.each(listdata.service, function (i, val) {
        //console.log(val.serviceId == detailId.slice(0,1))
        if (val.serviceId == serviceId) {
          var html = template('listServe', val);
          $('#showServe').append(html);
        }
      })*/
      $.each(listdata, function (i, val) {
//        console.log(val.serviceId == detailId.slice(0,1))
        console.log(val.serviceId,1,serviceId)//1 3
        if (val.serviceId === serviceId) {
          console.log(val.serviceId,2)

          var html = template('listServe', val);
          $('#showServe').append(html);
        }
      })
    }
//    function loadDataList(listdata) {
//      //表头
//      var html ="<tr class='t-header'>"+
//        "<td>头像</td>"+
//        "<td>姓名</td>"+
//        "<td>密码</td>"+
//        "</tr>";
//      $("#listData").append(html);
//      for (var i = 0; i < listdata.length; i++) {
//        var n = listdata[i];
//        //表格
//        var html = "<tr>"+
//          "<td>"+"<img src='getphoto?unid="+n.uuid+"' onerror='this.src=\"resources/img/default.png\"' style='width:48px;height:48px;border-radius:48px;'/>"+"</td>"+
//          "<td>"+n.username+"</td>"+
//          "<td>"+n.password+"</td>"+
//          "</tr>";
//        $("#listData").append(html);
//      }
//    }
    //分页查询结束
  /*<div class="clearbox">
      <div class="x-box">
      <h2><a>表格</a></h2>
      <table id="listData"></table>
      </div>
      <div id="Pagination" class="pagination"></div>
    </div>*/
  </script>
  <script id="listServe" type="text/html">
    {{each goods item i}}
    <div class="ctop">
      <a href="detail.html?detailId={{item.detailId}}">
        <img class="pic" src="{{item.imgUrl}}">
        <span class="spm spm2">
              <i>{{item.CName}}</i>
              <i style="color: #929292">{{item.description}}</i>
              <i>
                <b style="margin-left: 0" data-price="135">{{item.price}}<em>元/次</em></b><b class="oldpic" style="display: inline-block"><em>{{item.oldPrice}}元</em>
                </b>
              </i>
              <i class="navtxt">
                <b><img src="../img/home1.png" width="18" height="17" id="sname">{{serviceName}}</b><b>已售<em data-num="2538" id="num">{{time}}</em></b><b>好评<em data-rate="98" id="scoreRate">{{score}}%</em></b>
              </i>
            </span>
        <span class="spf quickly">
              <i>最快上门</i>
              <i data-time="1">1小时</i>
            </span>
      </a>
    </div>
    {{/each}}
  </script>
</body>
</html>
